CONFIG = {
    "label": "nm_fontan_tke_resume",
    "algorithm_label": "nm_fontan_tke_resume",
    "max_evals": 40,
    "geometry_penalty": 1.0e9,
    "space": {
        "names": (
            "bump1_amp",
            "bump2_amp",
            "size_scale",
            "straighten_strength",
            "offset_x",
        ),
        # Resume x0 = best vertex from the last logged simplex (iter=006): v0
        "x0": [0.0, 0.0, 1.0, 0.04000000000000001, 0.0],
        "lower": [0.0, 0.0, 0.8, 0.0, -2.7],
        "upper": [0.45, 4.5, 1.0, 0.4, 0.0],
    },
    "optimizer": {
        "type": "nelder_mead",
        "n_workers": 6,
        "parallel": True,
        "force_thread_pool": False,
        "memoize": True,
        "parallel_poll_points": True,
        "log_simplex": True,
        "step": [0.1, 0.1, -0.1, 0.1, -0.1],
        "no_improve_thr": 1.0e-3,
        "no_improv_break": 10,
        "penalty": 1.0e9,
        "tol": 1.0e-3,
        "print_bounds": True,
        # Resume from the last logged simplex (iter=006).
        "initial_simplex": [
            [0.0, 0.0, 1.0, 0.04000000000000001, 0.0],
            [0.0, 0.0, 1.0, 0.030000000000000006, -0.0674999999999999],
            [0.0, 0.0, 1.0, 0.030000000000000006, 0.0],
            [
                0.0019687500000000004,
                0.019687500000000004,
                0.999375,
                0.03175,
                -0.011812500000000004,
            ],
            [
                0.0013218750000000001,
                0.05821875000000001,
                0.9999375,
                0.031175000000000005,
                -0.007931249999999945,
            ],
            [0.011250000000000001, 0.0, 1.0, 0.030000000000000006, 0.0],
        ],
        "initial_simplex_values": [
            3.8029e-07,
            4.07372e-07,
            4.15786e-07,
            4.57162e-07,
            4.85833e-07,
            5.36352e-07,
        ],
    },
    "objective": {
        # pitch = Z_EXTENT / z_voxels
        "vef_config_path": "configs/vef/vef_fontan_tke_opt.json",
        "output_root": "data/vef_fontan_opt/vef_outputs",
        "runs_root": "data/vef_fontan_opt/runs",
        "z_voxels": 300,
        "sim_resolution": 300,
        "keep_temp_files": False,
        "maximize": False,
    },
    "solver": {
        "binary_name": "sim_fontan_tke",
        # "binary_path": "submodules/tnl-lbm/build/sim_NSE/sim_fontan_tke",
        "slurm": {
            "partition": None,
            "gpus": 1,
            "cpus": 4,
            "mem": "8G",
            "walltime": "22:00:00",
            "poll_interval": 60.0,
            "avg_window": 1.0,
            "verbose": False,
        },
    },
    "submit": {
        "job_name": "nm-opt-fontan-tke-resume",
        "time": "168:00:00",
        "cpus": 8,
        "gpus": None,
        "mem": "16G",
        "partition": None,
        "output": "opt-fontan-tke-nm-resume-%j.out",
        "open_mode": "append",
    },
}
